<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Zero@Production ‚Äî Employee Transport</title>
    <link rel="stylesheet" href="assets/css/theme.css" />
    <link rel="stylesheet" href="assets/css/zae-theme.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script defer src="assets/js/main.min.js"></script>
    <style>
      /* ZERO_OS_V1: Standard Styles */
      .zero-card { background:#fff; border:1px solid rgba(2,21,78,.1); border-radius:12px; padding:20px; box-shadow:0 4px 12px rgba(0,0,0,0.03); }
      .zero-kpi-label { font-size:12px; text-transform:uppercase; letter-spacing:0.5px; color:#64748b; font-weight:600; margin-bottom:4px; }
      .zero-kpi-value { font-size:28px; font-weight:800; color:#02154e; }
      .zero-pill { display:inline-block; padding:4px 10px; border-radius:999px; font-weight:700; font-size:12px; }
      .zero-pill.monitor { background:#f9ba00; color:#000; }
      .zero-pill.ok { background:#1bbf6a; color:#fff; }
      .zero-action-btn { border:1px solid rgba(2,21,78,.15); border-radius:12px; padding:10px 16px; background:#fff; color:#02154e; font-weight:700; cursor:pointer; display:flex; align-items:center; gap:6px; transition:all 0.2s; }
      .zero-action-btn:hover { background:#f8fafc; transform:translateY(-1px); }
      .zero-action-btn.primary { background:#f9ba00; border-color:#f9ba00; color:#000; }
      
      /* Context Bar */
      #zeroCtxBar { margin-bottom:20px; padding:12px 16px; background:#fff; border-radius:12px; border:1px solid rgba(2,21,78,.1); display:flex; align-items:center; gap:16px; flex-wrap:wrap; }
      .ctx-item { display:flex; gap:6px; }
      .ctx-label { color:#02154e; font-weight:700; }
      .ctx-val { color:#02154e; font-weight:800; }
    </style>
  </head>
  <body style="background:#f8fafc;">
    
    <!-- HEADER -->
    <header class="app-header" style="background:#fff; border-bottom:1px solid rgba(0,0,0,0.05); padding:16px 24px;">
        <div style="display: flex; align-items: center; justify-content: space-between; max-width:1400px; margin:0 auto;">
            <a href="index.html" style="text-decoration: none; display: flex; align-items: center;">
                <img src="assets/img/plogo.svg" alt="Zero Logo" style="height: 40px; margin-right: 12px;">
                <div style="font-weight:800; font-size:18px; color:#02154e;">Zero<span style="opacity:0.5;">@Production</span></div>
            </a>
            <div style="font-size:14px; font-weight:600; color:#02154e;">
                <span style="opacity:0.5;">Module:</span> Employee Transport
            </div>
        </div>
    </header>

    <main style="max-width:1400px; margin:0 auto; padding:24px;">
      
      <!-- 1. EXECUTIVE KPIS -->
      <div style="display:flex; gap:20px; margin-bottom:24px; flex-wrap:wrap;">
          <div class="zero-card" style="flex:1; min-width:200px;">
              <div class="zero-kpi-label">Total CO‚ÇÇ Impact</div>
              <div class="zero-kpi-value">1,240 <span style="font-size:16px; font-weight:600;">tCO‚ÇÇe</span></div>
          </div>
          <div class="zero-card" style="flex:1; min-width:200px;">
              <div class="zero-kpi-label">Estimated Cost (‚Ç¨)</div>
              <div class="zero-kpi-value">‚Ç¨186,000</div>
          </div>
          <div class="zero-card" style="flex:1; min-width:200px;">
              <div class="zero-kpi-label">Risk Status</div>
              <div class="zero-kpi-value"><span class="zero-pill monitor">MONITOR</span></div>
          </div>
      </div>

      <!-- 2. DECISION LAYER -->
      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; flex-wrap:wrap; gap:12px;">
          <h2 style="margin:0; font-size:20px; font-weight:800; color:#02154e;">Transport Intelligence</h2>
          <div style="display:flex; gap:10px;">
              <button class="zero-action-btn primary" id="btnEmail">‚úâÔ∏è Email HR/Ops</button>
              <button class="zero-action-btn" id="btnImpact">üí∂ ‚Ç¨ Impact</button>
              <button class="zero-action-btn" id="btnExport">üìÑ Board Export</button>
              <button class="zero-action-btn" id="btnFlag">üö© Flag Risk</button>
          </div>
      </div>

      <!-- 3. CONTEXT BAR -->
      <div id="zeroCtxBar">
          <div class="ctx-item">
              <span class="ctx-label">Facility:</span>
              <span class="ctx-val" id="ctxFacility">UGURLULAR</span>
          </div>
          <div style="width:1px; height:16px; background:#ddd;"></div>
          <div class="ctx-item">
              <span class="ctx-label">Role:</span>
              <span class="ctx-val" id="ctxRole">CFO</span>
          </div>
          <div style="width:1px; height:16px; background:#ddd;"></div>
          <div class="ctx-item">
              <span class="ctx-label">Scope:</span>
              <span class="ctx-val">SCOPE 3 (Category 7)</span>
          </div>
      </div>

      <!-- 4. ANALYTICS & TEACHING LOGIC -->
      <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap:24px;">
          
          <!-- Chart: Modal Split (Teaching Scope 3) -->
          <div class="zero-card">
              <h4 style="margin:0 0 16px 0; font-size:16px; color:#02154e;">Modal Split (Commuting Efficiency)</h4>
              <canvas id="chartModal" height="200"></canvas>
              <div style="margin-top:16px; font-size:12px; color:#666; font-style:italic;">
                  Insight: 65% of workforce relies on private shuttles. Electrifying this fleet is the highest leverage action.
              </div>
          </div>

          <!-- Chart: Cost vs CO2 -->
          <div class="zero-card">
              <h4 style="margin:0 0 16px 0; font-size:16px; color:#02154e;">Cost vs. CO‚ÇÇ Intensity</h4>
              <canvas id="chartCost" height="200"></canvas>
              <div style="margin-top:16px; font-size:12px; color:#666; font-style:italic;">
                  Insight: Diesel buses (Euro 4) drive 70% of cost and 85% of emissions.
              </div>
          </div>

          <!-- Context Drilldown Table -->
          <div class="zero-card" style="grid-column: 1 / -1;">
              <h4 style="margin:0 0 16px 0; font-size:16px; color:#02154e;">Route Optimization Drilldown</h4>
              <div style="overflow-x:auto;">
                  <table style="width:100%; border-collapse:collapse; font-size:14px;">
                      <thead>
                          <tr style="border-bottom:2px solid #eee; text-align:left; color:#64748b;">
                              <th style="padding:12px;">Route Zone</th>
                              <th style="padding:12px;">Vehicle Type</th>
                              <th style="padding:12px;">Daily Distance</th>
                              <th style="padding:12px;">Occupancy</th>
                              <th style="padding:12px;">CO‚ÇÇ/pkm</th>
                              <th style="padding:12px;">Status</th>
                          </tr>
                      </thead>
                      <tbody>
                          <tr style="border-bottom:1px solid #eee;">
                              <td style="padding:12px; font-weight:600;">North (City Center)</td>
                              <td style="padding:12px;">Diesel Bus (Euro 5)</td>
                              <td style="padding:12px;">85 km</td>
                              <td style="padding:12px;">92%</td>
                              <td style="padding:12px;">High</td>
                              <td style="padding:12px;"><span class="zero-pill monitor">MONITOR</span></td>
                          </tr>
                          <tr style="border-bottom:1px solid #eee;">
                              <td style="padding:12px; font-weight:600;">East (Suburbs)</td>
                              <td style="padding:12px;">Electric Shuttle</td>
                              <td style="padding:12px;">42 km</td>
                              <td style="padding:12px;">88%</td>
                              <td style="padding:12px;">Low</td>
                              <td style="padding:12px;"><span class="zero-pill ok">OPTIMAL</span></td>
                          </tr>
                          <tr style="border-bottom:1px solid #eee;" id="rowAction">
                              <td style="padding:12px; font-weight:600;">West (Industrial)</td>
                              <td style="padding:12px;">Diesel Bus (Euro 4)</td>
                              <td style="padding:12px;">110 km</td>
                              <td style="padding:12px;">65%</td>
                              <td style="padding:12px;">Very High</td>
                              <td style="padding:12px;"><span class="zero-pill" style="background:#D51635; color:#fff;">ACTION</span></td>
                          </tr>
                      </tbody>
                  </table>
              </div>
          </div>

      </div>

    </main>

    <!-- SCRIPTS -->
    <script>
      (function(){
        // 1. Toast Logic
        const showToast = (msg) => {
            let t = document.createElement("div");
            t.style.cssText = "position:fixed; bottom:30px; left:50%; transform:translateX(-50%); background:#333; color:#fff; padding:12px 24px; border-radius:30px; z-index:99999; font-weight:600; box-shadow:0 10px 30px rgba(0,0,0,0.2); animation: slideUp 0.3s ease-out;";
            t.textContent = msg;
            document.body.appendChild(t);
            setTimeout(()=>t.remove(), 3000);
        };

        // 2. Action Buttons (Decision Layer)
        document.getElementById("btnEmail").onclick = () => showToast("Email draft opened for HR/Operations.");
        document.getElementById("btnFlag").onclick = () => showToast("Route 'West (Industrial)' flagged for fleet renewal.");
        document.getElementById("btnExport").onclick = () => window.print();
        
        const impactAnalysis = () => {
            alert("Financial Impact Analysis (Shadow Price):\n\nCurrent Annual Cost: ‚Ç¨186,000\nPotential Carbon Tax Exposure: ‚Ç¨22,000\n\nRecommendation: Electrify 'West (Industrial)' route.\nROI: 18 months.");
        };
        document.getElementById("btnImpact").onclick = impactAnalysis;

        // 3. Context Injection (URL Params)
        const qs = new URLSearchParams(location.search);
        const facility = qs.get("facility");
        const role = qs.get("role");
        if(facility) document.getElementById("ctxFacility").textContent = facility;
        if(role) document.getElementById("ctxRole").textContent = role.toUpperCase();

        // 4. Demo Mode Logic
        if(qs.get("demo") === "transport_story"){
            // Auto-open impact
            setTimeout(impactAnalysis, 800);
            // Highlight Inefficient Route
            const row = document.getElementById("rowAction");
            if(row){
                row.style.transition = "background 0.5s";
                row.style.backgroundColor = "#fff1f2";
            }
        }

        // 5. Charts (Teaching Logic)
        if(window.Chart){
            // Modal Split Pie
            new Chart(document.getElementById('chartModal'), {
                type: 'doughnut',
                data: {
                    labels: ['Company Shuttle (Diesel)', 'Company Shuttle (EV)', 'Private Car', 'Public Transport'],
                    datasets: [{
                        data: [45, 20, 25, 10],
                        backgroundColor: ['#02154e', '#1bbf6a', '#f9ba00', '#94a3b8'],
                        borderWidth: 0
                    }]
                },
                options: {
                    plugins: { legend: { position: 'right' } },
                    cutout: '65%'
                }
            });

            // Cost vs CO2 Bar
            new Chart(document.getElementById('chartCost'), {
                type: 'bar',
                data: {
                    labels: ['Shuttle (Diesel)', 'Shuttle (EV)', 'Car Reimb.'],
                    datasets: [
                        { label: 'Cost Share (%)', data: [70, 15, 15], backgroundColor: '#02154e' },
                        { label: 'CO‚ÇÇ Share (%)', data: [85, 5, 10], backgroundColor: '#D51635' }
                    ]
                },
                options: {
                    scales: { y: { beginAtZero: true, max: 100 } }
                }
            });
        }
      })();
    </script>
  </body>
</html>